<html>
	<head>
		<title>Mao Table</title>
		<script>
			//Credit to plainjs.com/javascript/utilities/set-cookie-get-cookie-and-delete-cookie-5
			//July 26, 2019
			function getCookie(name) {
			    var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
			    return v ? v[2] : null;
			}
			function setCookie(name, value, days) {
			    var d = new Date;
			    d.setTime(d.getTime() + 24*60*60*1000*days);
			    document.cookie = name + "=" + value + ";path=/;expires=" + d.toGMTString();
			}
			function deleteCookie(name) { setCookie(name, '', -1); }


			const wsURI = 'ws://192.168.137.106'
			const wsPort = '1258'
			const query = 'token=r&business=joining&tableID=0'
			const ws = new WebSocket(wsURI + ':' + wsPort + '?' + query)
			ws.onopen = () => {
				console.log('opened')
				setTimeout(() => {
					const chatMessage = {
						event: 'chatMessage',
						message: 'hello world'
					}
					ws.send(JSON.stringify(chatMessage))
				}, 100)
			}
			ws.onmessage = (messageEvent) => {
				console.log('message:\n' + messageEvent.data)
			}
			ws.onclose = (closeEvent) => {
				if(closeEvent.reason) {
					console.log('closed for ' + closeEvent.reason)
				}
				else {
					console.log('closed')
				}
			}

		</script>
	</head>
</html>